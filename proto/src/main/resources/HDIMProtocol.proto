syntax = "proto3";message MessagePack {    uint32 command = 1; /* 命令 */    uint32 errorCode = 2; /* 错误码 */    uint64 sequenceId = 3; /* 请求ID */    bytes payload = 4; /* 有效负载 */}enum IMCommand {    RESERVED = 0; /* 保留字段 */    LOGIN = 1; /* 登录 */    LOGOUT = 2; /* 退出登录 */    PING = 3; /* 心跳包 */    MS = 4; /* 发送消息 */    MP = 5; /* 拉取消息 */    MN = 6; /* 消息通知 */    MR = 7; /* 撤回消息 */    GUI = 8; /* 获取用户信息 */    FAR = 9; /* 添加好友请求 */    FHR = 10; /* 处理添加好友请求 */    FRP = 11; /* 拉取添加好友请求列表 */    FRN = 12; /* 通知添加好友请求 */    FQA = 13; /* 同步未读添加好友请求 */    FDL = 14; /* 删除好友 */    FP = 15; /* 拉取好友列表 */    FN = 16; /* 通知好友列表 */    BLU = 17; /* 用户黑名单 */    MFA = 18; /* 修改好友别名 */    USG = 19; /* 获取用户设置 */    USP = 20; /* 更新用户设置 */    USN = 21; /* 通知用户设置 */}enum PlatForm {    ANDROID = 0; /* 安卓 */    IOS = 1; /* IOS */}message Login {    string token = 1; /* 平台的token */    bytes encryptData = 2; /* 客户端aes加密后的数据 */    bytes encryptKey = 3; /* 服务器rsa公钥加密后的aes密钥 */}message ClientInfo {    string clientId = 1; /* 客户端唯一ID */    string userId = 2; /* 用户ID */    uint32 platForm = 3; /* 登录平台 */    string appVersion = 4; /* 应用版本信息 */}message LoginResponse {    uint64 messageHead = 1; /* 消息头 */    uint64 userSettingHead = 2; /* 用户设置 */    uint64 userFriendHead = 3; /* 用户好友信息头 */    uint64 friendRequestHead = 4; /* 好友请求头 */}message Message {    uint64 messageId = 1; /* 客户端自增ID */    MessageContent messageContent = 2; /* 消息内容 */    Conversation conversation = 3; /* 会话信息 */    string from = 4;    string to = 5;}message MessageResponse {    uint64 messageId = 1; /* 服务器保存消息ID */    uint64 timestamp = 2; /* 服务器时间 */}enum ConversationType {    SIGNAL = 0; /* 单聊 */    GROUP = 1; /* 群聊 */}message Conversation {    uint32 type = 1; /* 会话类型 */    string target = 2; /* 目标 */}enum MessageContentType {    UNKNOWN = 0; /* 未知消息 */    TEXT = 1; /* 文本消息 */    SOUND = 2; /* 语言消息 */    IMAGE = 3; /* 图片消息 */    LOCATION = 4; /* 位置消息 */    FILE = 5; /* 文件消息 */    VIDEO = 6; /* 视频消息 */    STICKER = 7; /* 动态表情消息 */    TYPING = 8; /* 正在输入 */}message MessageContent {    uint32 contentType = 1; /* 消息内容类型 */    string searchableContent = 2; /* 可搜索的关键字 */    string pushContent = 3; /* 推送消息 */    bytes data = 4; /* 有效负载 */    uint32 mentionedType = 5; /* 提醒类型 */    repeated string mentionedTargets = 6; /* 提醒成员列表 */    uint32 mediaType = 7; /* 媒体消息类型 */    uint32 msgLength = 8; /* 消息长度 */    string remoteMediaUrl = 9; /* 外部URL */    string localMediaPath = 10; /* 下载后的本地地址 */}message NotifyMessage {    uint32 type = 1; /* 推送类型 */    uint64 head = 2; /* 消息请求头 */    string target = 3; /* 用户/群ID */}message PullMessageRequest {    uint64 messageHead = 1; /* 请求本地消息头 */}message PullMessageResponse {    repeated Message messages = 1; /* 消息集合 */    uint64 current = 2; /* 当前消息头 */    uint64 head = 3; /* 服务器消息头 */}message Ping {}message Pong {}message User {    string uid = 1;    string name = 2;    string display_name = 3;    string portrait = 4;    string mobile = 5;    string email = 6;    string address = 7;    string company = 8;    string extra = 9;    uint64 update_dt = 10;    uint32 gender = 11;    string social = 12;    uint32 type = 13;    string countryCode = 14;    string merchant_id = 15;    string u_no = 16;    string open_id = 17;    string password = 18;    string register_platform = 19;    string salt = 20;    string cover = 21;}message UserRequest {    string uid = 1; /*用户ID*/    uint64 dt = 2; /*更新时间*/}message PullUserInfoRequest {    repeated UserRequest request = 1; /* 用户集合 */}message BlackUserRequest {    string uid = 1; /* 用户ID */    uint32 status = 2;}message GetFriendRequest {    uint64 userFriendHead = 1;}message GetFriendResponse {    repeated Friend friends = 1;}message Friend {    string uid = 1; /* 好友ID */    int32 state = 2; /* 好友状态 */    int64 updateDt = 3; /* 数据更新时间 */    string alias = 4; /* 别名 */    int32 friendOrigin = 5; /* 好友来源 */    string displayName = 6; /* 昵称 */    string portrait = 7; /* 头像 */}enum UserSettingType {    USER_SETTING_RESERVED = 0; /* 保留位 */    GLOBAL_SILENT = 1; /* 接收消息通知 */    CONVERSATION_SILENT = 2; /* 会话静音 */    CONVERSATION_TOP = 3; /* 会话置顶 */    GLOBAL_HIDDEN_NOTIFICATION_DETAIL = 4; /* 隐藏通知消息详情 */    USER_FRIEND_STAR = 5; /* 星标好友 */}message UserSetting {    uint32 userSettingType = 1; /* 用户设置类型 */    string key = 2; /* 用户设置key */    string value = 3; /* 用户设置值 */    uint64 dt = 4; /* 更新时间 */}message GetUserSettingResponse {    repeated UserSetting userSettings = 1; /* user setting 集合 */}message ModifyUserSettingResponse {    uint64 dt = 1; /* user setting head */}