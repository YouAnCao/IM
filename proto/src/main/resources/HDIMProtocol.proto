syntax = "proto3";message MessagePack {    uint32 command = 1; /* 命令 */    uint32 errorCode = 2; /* 错误码 */    uint64 sequenceId = 3; /* 请求ID */    bytes payload = 4; /* 有效负载 */}enum IMCommand {    RESERVED = 0; /* 保留字段 */    LOGIN = 1; /* 登录 */    LOGOUT = 2; /* 退出登录 */    PING = 3; /* 心跳包 */    MS = 4; /* 发送消息 */    MP = 5; /* 拉取消息 */    MN = 6; /* 消息通知 */    USG = 7; /* 获取用户设置 */    USP = 8; /* 更新用户设置 */    USN = 9; /* 通知用户设置 */}enum PlatForm {    ANDROID = 0; /* 安卓 */    IOS = 1; /* IOS */}message Login {    string token = 1; /* 平台的token */    bytes encryptData = 2; /* 客户端aes加密后的数据 */    bytes encryptKey = 3; /* 服务器rsa公钥加密后的aes密钥 */}message ClientInfo {    string clientId = 1; /* 客户端唯一ID */    string userId = 2; /* 用户ID */    uint32 platForm = 3; /* 登录平台 */    string appVersion = 4; /* 应用版本信息 */}message LoginResponse {    uint64 messageHead = 1; /* 消息头 */    uint64 userSettingHead = 2; /* 用户设置 */    uint64 userFriendHead = 3; /* 用户好友信息头 */    uint64 friendRequestHead = 4; /* 好友请求头 */}message Message {    uint64 messageId = 1; /* 客户端自增ID */    MessageContent messageContent = 2; /* 消息内容 */    Conversation conversation = 3; /* 会话信息 */    string from = 4;    string to = 5;}message MessageResponse {    uint64 messageId = 1; /* 服务器保存消息ID */    uint64 timestamp = 2; /* 服务器时间 */}enum ConversationType {    SIGNAL = 0; /* 单聊 */    GROUP = 1; /* 群聊 */}message Conversation {    uint32 type = 1; /* 会话类型 */    string target = 2; /* 目标 */}enum MessageContentType {    UNKNOWN = 0; /* 未知消息 */    TEXT = 1; /* 文本消息 */    SOUND = 2; /* 语言消息 */    IMAGE = 3; /* 图片消息 */    LOCATION = 4; /* 位置消息 */    FILE = 5; /* 文件消息 */    VIDEO = 6; /* 视频消息 */    STICKER = 7; /* 动态表情消息 */    TYPING = 8; /* 正在输入 */}message MessageContent {    uint32 contentType = 1; /* 消息内容类型 */    string searchableContent = 2; /* 可搜索的关键字 */    string pushContent = 3; /* 推送消息 */    bytes data = 4; /* 有效负载 */    uint32 mentionedType = 5; /* 提醒类型 */    repeated string mentionedTargets = 6; /* 提醒成员列表 */    uint32 mediaType = 7; /* 媒体消息类型 */    string remoteMediaUrl = 8; /* 外部URL */    string localMediaPath = 9; /* 下载后的本地地址 */}message NotifyMessage {    uint32 type = 1; /* 推送类型 */    uint64 head = 2; /* 消息请求头 */    string target = 3; /* 用户/群ID */}message PullMessageRequest {    uint64 messageHead = 1; /* 请求本地消息头 */}message PullMessageResponse {    repeated Message messages = 1; /* 消息集合 */    uint64 current = 2; /* 当前消息头 */    uint64 head = 3; /* 服务器消息头 */}message Ping {}message Pong {}enum MessageSettingType {    GLOBAL_SILENT = 0; /* 全部静音 */    CONVERSATION_SILENT = 1; /* 会话静音 */    CONVERSATION_TOP = 2; /* 会话置顶 */}message UserSetting {    uint32 userSettingType = 1; /* 用户设置类型 */    string key = 2; /* 用户设置key */    uint32 value = 3; /* 用户设置值 */    uint64 dt = 4; /* 更新时间 */}message GetUserSettingRequest {    uint64 userSettingHead = 1; /* 用户端本地的用户设置头 */}message GetUserSettingResponse {    repeated UserSetting userSettings = 1; /* user setting 集合 */}message ModifyUserSettingRequest {    uint32 userSettingType = 1; /* 用户设置类型 */    string key = 2; /* 用户设置key */    uint32 value = 3; /* 用户设置值 */}message ModifyUserSettingResponse {    uint64 dt = 1; /* user setting head */}